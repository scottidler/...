verbose: True
allow_errors: False

link:
  recursive: True
  root: /

ppa:
  items:
  - git-core/ppa
  - mkusb/ppa
  - graphics-drivers/ppa
  - otto-kesselgulasch/gimp
  - ubuntu-mozilla-daily
  - qbittorrent-team/qbittorrent-stable

pkg:
  items:
  - jq
  - vim
  - pass
  - tmux
  - tree
  - cargo
  - pwgen
  - whois
  - mpg123
  - autossh
  - xdotool
  - graphviz
  - shellcheck
  - ssh-askpass
  - openssh-server
  - npm
  - zsh
  - meld
  - rsync
  - xclip
  - python
  - ansible
  - dconf-cli
  - python-pip
  - python3-pip
  - anki
  - flatpak
  - gnome-software-plugin-flatpak
  - apt-transport-https
  - ca-certificates
  - curl
  - gnupg-agent
  - software-properties-common

apt:
  items:
  - fonts-powerline
  - libsmbclient-dev
  - silversearcher-ag
  - httpie
  - pianobar
  - python-dev
  - python3-dev
  - libffi-dev
  - libicu-dev
  - libssl-dev
  - libffi-dev
  - build-essential
  - portaudio19-dev
  - openvpn
  - network-manager-openvpn
  - network-manager-openvpn-gnome
  - firefox-trunk
  - libcurl4-openssl-dev
  - librsync-dev
  - libglib2.0-dev
  - python-gobject-2-dev
  - libgirepository1.0-dev
  - libcairo2-dev
  - libjpeg-dev
  - libgif-dev
  - python3-cairo-dev
  - libxml2-dev
  - libxmlsec1-dev
  - rlwrap
  - qbittorrent
  - libcups2-dev #ref: https://ubuntuforums.org/showthread.php?t=1269926
  - libkrb5-dev #ref: https://github.com/mongodb-js/kerberos/issues/45
  - wmctrl #for ./layout script

dnf:
  items:
  - the_silver_searcher
  - gcc
  - libffi-devel
  - python-devel
  - openssl-devel
  - python3-devel

pip3:
  items:
  - numpy
  - wheel
  - addict
  - aiohttp
  - ipython
  - requests
  - ruamel.yaml
  - cryptography

pipx:
  items:
  - doit
  - mypy
  - awscli
  - pipenv
  - asciinema
  - pipupgrade
  - virtualenv
  - mps-youtube
  - docker-compose

npm:
  items:
  - diff-so-fancy

github:
  scottidler/git:
    link:
      bin/clone: ~/bin/clone
      bin/git-objects: ~/bin/git-objects
      bin/ls-git-repos: ~/bin/ls-git-repos
      bin/ls-org-repos: ~/bin/ls-org-repos
      shell-functions.sh: ~/.shell-functions.d/clone.sh
      cfg/clone.cfg: ~/.clone/clone/clone.cfg
  scottidler/vault:
    link:
      shell-functions.sh: ~/.shell-functions.d/vault.sh
  scottidler/tmp:
    link:
      bin/tmp: ~/bin/tmp
  scottidler/helpful:
    link:
      bin/cidr: ~/bin/cidr
      bin/say: ~/bin/say
      bin/scp: ~/bin/scp
      bin/speedtest: ~/bin/speedtest
      bin/tab: ~/bin/tab
      bin/tab1: ~/bin/tab1
      bin/tab2: ~/bin/tab2
      bin/tab3: ~/bin/tab3
      bin/tab4: ~/bin/tab4
      bin/toggle: ~/bin/toggle
      bin/toggle-remote-url: ~/bin/toggle-remote-url
      shell-functions.sh: ~/.shell-functions.d/helpful.sh
  scottidler/dock:
    link:
      dock: ~/bin/dock
  scottidler/pimp:
    link:
      pimp: ~/bin/pimp
  scottidler/rmrf:
    link:
      rmrf: ~/bin/rmrf
      bkup: ~/bin/bkup
      bkup-rmrf: ~/bin/bkup-rmrf
      ls-rmrf: ~/bin/ls-rmrf
      ls-bkup: ~/bin/ls-bkup
  scottidler/ls-stat:
    link:
      ls-stat: ~/bin/ls-stat
  scottidler/ssh-ident:
    link:
      ssh-ident: ~/bin/ssh
  pyenv/pyenv:
    link:
      ./: ~/.pyenv
  mozilla-it/repo:
    link:
      bin/repo: ~/bin/repo
  mozilla-it/cert-tools:
    link:
      findcert: ~/bin/findcert
      modcert: ~/bin/modcert
      ssl-compare: ~/bin/ssl-compare
      ssl-inspect: ~/bin/ssl-inspect
      ssl-sans: ~/bin/ssl-sans
      ssl-validity: ~/bin/ssl-validity
  sahsanu/lectl:
    link:
      lectl: ~/bin/lectl
  esc/git-big-picture:
    link:
      git-big-picture: ~/bin/gbp
  awslabs/awscli-aliases:
    link:
      alias: ~/.awscli-aliases
  powerline/powerline:
    link:
      font/10-powerline-symbols.conf: ~/.config/fontconfig/conf.d/10-powerline-symbols.conf
      font/PowerlineSymbols.otf: ~/.fonts/PowerlineSymbols.otf
  joel-porquet/zsh-dircolors-solarized:
    link:
      zsh-dircolors-solarized.zsh: ~/.zsh/zsh-dircolors-solarized/zsh-dircolors-solarized.zsh
  robbyrussell/oh-my-zsh:
    link:
      ./: ~/.oh-my-zsh
  awslabs/git-secrets:
    link:
      git-secrets: ~/bin/git-secrets
  tfutils/tfenv:
    link:
      bin/terraform: ~/bin/terraform
      bin/tfenv: ~/bin/tfenv

script:
  vim+git: |
    sudo apt-get install -y vim git
    sudo update-alternatives --set editor /usr/bin/vim.basic
  sudoers: |
    sudo echo "${USER}  ALL=NOPASSWD: ALL" > /etc/sudoers.d/${USER}
  cheat: |
    curl https://cht.sh/:cht.sh > ~/bin/cheat
    chmod +x ~/bin/cheat
  ngrok: |
    curl https://bin.equinox.io/c/4VmDzA7iaHb/ngrok-stable-linux-amd64.zip ngrok.zip
    unzip ngrok.zip
    mv ngrok/ngrok ~/bin/
  ccat: |
    curl -L https://github.com/jingweno/ccat/releases/latest > ccat.tar.gz
    tar xvf ccat.tar.gz
    mv ccat/ccat ~/bin/
  kubectl: |
    sudo apt-get update && sudo apt-get install -y apt-transport-https
    curl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | sudo apt-key add -
    echo "deb https://apt.kubernetes.io/ kubernetes-xenial main" | sudo tee -a /etc/apt/sources.list.d/kubernetes.list
    sudo apt-get update
    sudo apt-get install -y kubectl
  kubetpl: |
    URL=https://github.com/shyiko/kubetpl/releases/download/0.9.0/kubetpl-0.9.0-linux-amd64
    curl -sSL $URL -o kubetpl && chmod a+x kubetpl && sudo mv kubetpl ~/bin/
  spotify: |
    # 1. Add the Spotify repository signing keys to be able to verify downloaded packages
    sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys 931FF8E79F0876134EDDBDCCA87FF9DF48BF1C90
    # 2. Add the Spotify repository
    echo deb http://repository.spotify.com stable non-free | sudo tee /etc/apt/sources.list.d/spotify.list
    # 3. Update list of available packages
    sudo apt-get update
    # 4. Install Spotify
    sudo apt-get install spotify-client
  rust: |
    curl https://sh.rustup.rs -sSf | sh
  virtualbox: |
    wget -q https://www.virtualbox.org/download/oracle_vbox_2016.asc -O- | sudo apt-key add -
    wget -q https://www.virtualbox.org/download/oracle_vbox.asc -O- | sudo apt-key add -
    sudo apt-get update
    sudo apt-get install virtualbox-6.0
  docker: |
    curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
    sudo add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable"
    sudo apt-get update
    sudo apt-get install -y docker-ce
  keybase: |
    # src: https://keybase.io/docs/the_app/install_linux
    curl --remote-name https://prerelease.keybase.io/keybase_amd64.deb
    sudo apt install ./keybase_amd64.deb
    rm -rf keybase_amd64.deb
    run_keybase
  ripgrep: |
    ARCH="amd64"
    DEB="ripgrep-latest.deb"
    LATEST="https://api.github.com/repos/BurntSushi/ripgrep/releases/latest"
    URL=$(curl -sL "$LATEST" | jq -r ".assets[] | select(.name | test(\"$ARCH\")) | .browser_download_url")
    DEB=$(basename $URL)
    wget $URL
    sudo apt install ./$DEB && rm ./$DEB
  papertrail: |
    sudo gem install papertrail
  nordvpn: |
    # ref: https://nordvpn.com/download/linux/
    URL=https://repo.nordvpn.com/deb/nordvpn/debian/pool/main/nordvpn-release_1.0.0_all.deb
    DEB=$(basename $URL)
    wget $URL
    sudo apt install ./$DEB && rm ./$DEB
  riot: |
    sudo apt install -y lsb-release wget apt-transport-https
    sudo wget -O /usr/share/keyrings/riot-im-archive-keyring.gpg https://packages.riot.im/debian/riot-im-archive-keyring.gpg
    echo "deb [signed-by=/usr/share/keyrings/riot-im-archive-keyring.gpg] https://packages.riot.im/debian/ $(lsb_release -cs) main" |
      sudo tee /etc/apt/sources.list.d/riot-im.list
    sudo apt update
    sudo apt install riot-web
  vscode: |
    sudo apt update
    sudo apt install -y software-properties-common apt-transport-https wget
    wget -q https://packages.microsoft.com/keys/microsoft.asc -O- | sudo apt-key add -
    sudo add-apt-repository "deb [arch=amd64] https://packages.microsoft.com/repos/vscode stable main"
    sudo apt update
    sudo apt install code
  pulse: |
    LATEST=https://api.github.com/repos/klinker-apps/pulse-sms-desktop/releases/latest
    URL=$(curl -sL $LATEST | jq -r '.assets[] | select(.name | contains("deb")) | .browser_download_url')
    DEB=$(basename $URL)
    wget $URL
    sudo apt install ./$DEB && rm ./$DEB
